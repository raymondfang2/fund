{"version":3,"sources":["web3.js","factory.js","fund.js","pages/Welcome.js","pages/ContributeForm.js","pages/RequestForm.js","pages/RequestRow.js","pages/FundDetail.js","App.js","reportWebVitals.js","index.js"],"names":["window","ethereum","request","method","web3","Web3","instance","eth","Contract","FundFactory","abi","address","Fund","Welcome","state","charityOwner","funds","fundName","errorMessage","loading","onSubmit","event","a","preventDefault","setState","givenProvider","selectedAddress","currentAccount","console","log","factory","methods","raiseFund","send","from","message","location","reload","call","getFunds","this","items","map","link","header","description","to","fluid","Card","Group","Grid","padded","Row","Column","width","Form","error","Field","Input","value","onChange","target","Message","content","Button","primary","length","renderFunds","React","Component","ContributeForm","fund","props","contribute","withRouter","RequestForm","recipient","createRequest","RequestRow","onApprove","approveRequest","id","Table","Cell","donatorsCount","utils","fromWei","approvalCount","color","basic","onClick","FundDetail","fundAddress","balance","numRequests","manager","requests","match","params","getSummary","summary","Promise","all","Array","parseInt","fill","element","index","meta","style","overflowWrap","renderFund","Header","HeaderCell","Body","renderRequestRows","App","exact","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1dfefae9.chunk.js","sourcesContent":["import Web3 from \"web3\";\n\nwindow.ethereum.request({ method: \"eth_requestAccounts\" });\nconst  web3 = new Web3(window.ethereum);\n\nexport default web3;\n","import web3 from \"./web3\";\nimport FundFactory from \"./contracts/FundFactory.json\";\n\nconst instance = new web3.eth.Contract(\n  FundFactory.abi,\n  \"0xD34fdF127573241FBF69A598F82045DF870a9640\"\n);\n//replace the above address with the output of \"truffle migrate ...\" --> the contract address of FundFactory\n//Only the account deployed the above factory can raise fund --> the charityOwner\nexport default instance;\n","import web3 from \"./web3\";\nimport Fund from \"./contracts/Fund.json\";\n\n\nexport default (address) => {\n    return new web3.eth.Contract(\n        Fund.abi,\n        address\n    );\n};\n","import React from \"react\";\n//Semantic UI\nimport { Card, Form, Grid, Button, Input, Message } from 'semantic-ui-react'\nimport 'semantic-ui-css/semantic.min.css'\n//React-Route\nimport { Link} from 'react-router-dom'\n\nimport web3 from \"../web3\";\nimport factory from \"../factory\";\nimport fund from \"../fund\";\n\nclass Welcome extends React.Component {\n    //1. This is part of the constructor will be invoked when page launch index.js\n    state = {\n        charityOwner: '',\n        funds:[],\n        //For raising fund\n        fundName: '',\n        errorMessage: '',\n        loading: false\n    };\n\n\n\n    //3. This will be invoked after rendering\n    //state.manager changed\n    //4. state change will cause the re-render!\n    async componentDidMount() {\n        const charityOwner = await factory.methods.charityOwner().call();\n        const funds = await factory.methods.getFunds().call();\n        console.log(\"=====>\");\n        console.log(charityOwner);\n        this.setState({ charityOwner, funds });\n    }\n\n    onSubmit = async (event) => {\n        event.preventDefault(); //Not classical html way\n        this.setState({loading: true, errorMessage: ''});\n\n        try {\n            //const accounts = await web3.eth.getAccounts();\n            const currentAccount = await web3.givenProvider.selectedAddress;\n            console.log(\"<======\");\n            console.log(currentAccount);\n\n            await factory.methods.raiseFund(this.state.fundName).send({\n                //from: accounts[0]\n                from: currentAccount\n            });\n        } catch (err) {\n            this.setState({errorMessage: err.message});\n        }\n\n        this.setState({loading: false});\n\n        window.location.reload(); //refresh the page to show the new Fund raised!\n    }\n\n\n    renderFunds()  {\n        const items = this.state.funds.map((address)=> {\n            const link = \"/detail/\"+address;\n            return {\n                header: address,\n                description: <Link to={link}>View Fund Detail</Link>,\n                fluid: true\n            }\n        });\n        return <Card.Group items={items} />;\n    }\n\n\n\n\n    //2. render to be called\n    render() {\n        return (\n            <div >\n                <Grid padded>\n                    <Grid.Row>\n                        <Grid.Column width={10} >\n                            <h2>Raise a new Fund</h2>\n                            <Form onSubmit={this.onSubmit} error={!!this.state.errorMessage}>\n                                <Form.Field>\n                                    <label>Fund Name:</label>\n                                    <Input\n                                        value={this.state.fundName}\n                                        onChange={(event)=> {\n                                            this.setState({fundName: event.target.value})\n                                        }}\n                                    />\n                                </Form.Field>\n                                <Message error header=\"Oops!\" content={this.state.errorMessage}/>\n                                <Button loading={this.state.loading} primary>Create!</Button>\n                            </Form>\n                        </Grid.Column>\n                        <Grid.Column width={6}> </Grid.Column>\n                    </Grid.Row>\n                    <Grid.Row>\n                        <Grid.Column width={10} >\n                            <h2>Fund List.</h2>\n\n                            <p>This contract is managed by {this.state.charityOwner}</p>\n                            <p>There are currently {this.state.funds.length} funds</p>\n                            <div>{this.renderFunds()}</div>\n                        </Grid.Column>\n                        <Grid.Column width={6}> </Grid.Column>\n                    </Grid.Row>\n                </Grid>\n\n            </div>\n        );\n    }\n}\nexport default Welcome;\n","import React, { Component } from \"react\";\nimport {Form, Input, Message, Button} from \"semantic-ui-react\";\nimport {  withRouter } from 'react-router-dom'\nimport web3 from \"../web3\";\nimport Fund from \"../fund\";\n\n\nclass ContributeForm extends  Component {\n    state = {\n        value: '',\n        errorMessage: '',\n        loading: false\n    };\n\n    onSubmit = async (event) => {\n        event.preventDefault();\n        const fund = Fund(this.props.address);\n        this.setState({loading: true, errorMessage: ''});\n        try {\n            console.log(\"=========> contribution...\");\n            //const accounts = await  web3.eth.getAccounts();\n            const currentAccount = await web3.givenProvider.selectedAddress;\n            console.log(\"=========>\");\n            console.log(currentAccount);\n            console.log(\"=========>\")\n            await  fund.methods.contribute().send({\n                from: currentAccount,\n                value: this.state.value\n            });\n\n            //window.location.reload(false); //refresh the current detail page -> show the donated amount inside\n        } catch (err) {\n            console.log(\"==============>\");\n            console.log(err.message);\n            this.setState({errorMessage: err.message});\n        }\n\n        this.setState({loading: false, value: ''});\n\n    }\n\n    render() {\n        return(\n            <Form onSubmit={this.onSubmit} error={!!this.state.errorMessage}>\n                <Form.Field>\n                    <label>Amount to Contribute</label>\n                    <Input\n                        value={this.state.value}\n                        onChange={event=>this.setState({value: event.target.value})} />\n                </Form.Field>\n                <Message error header=\"Oops!\" content={this.state.errorMessage}/>\n                <Button primary loading={this.state.loading}>Contribute!</Button>\n            </Form>\n        );\n    }\n}\n\nexport default withRouter(ContributeForm);\n","import React, {Component} from \"react\";\nimport { Form, Button, Message, Input } from \"semantic-ui-react\";\nimport { withRouter } from 'react-router-dom'\nimport web3 from \"../web3\";\nimport Fund from \"../fund\";\n\nclass RequestForm extends Component {\n    state = {\n        value: \"\",\n        description: \"\",\n        recipient: \"\",\n        loading: false,\n        errorMessage: ''\n    };\n\n\n    onSubmit = async (event) => {\n        event.preventDefault();\n\n        const fund = Fund(this.props.address);\n        const { description, value, recipient } = this.state;\n\n        this.setState({loading: true, errorMessage: ''});\n\n        try {\n            const currentAccount = await web3.givenProvider.selectedAddress;\n            await fund.methods\n                .createRequest(description, value, recipient)\n                .send({ from: currentAccount });\n\n            //window.location.reload(false); //refresh the current detail page -> show the donated amount inside\n        } catch (err) {\n            console.log(\"===========>\");\n            console.log(err.message);\n            this.setState({ errorMessage: err.message});\n        }\n\n        this.setState({loading: false});\n    };\n\n\n    render() {\n        return (\n                <Form onSubmit={this.onSubmit} error={!!this.state.errorMessage}>\n                    <Form.Field>\n                        <label>Description</label>\n                        <Input\n                            value={this.state.description}\n                            onChange={(event) =>\n                                this.setState({ description: event.target.value })\n                            }\n                        />\n                    </Form.Field>\n\n                    <Form.Field>\n                        <label>Value</label>\n                        <Input\n                            value={this.state.value}\n                            onChange={(event) => this.setState({ value: event.target.value })}\n                        />\n                    </Form.Field>\n\n                    <Form.Field>\n                        <label>Recipient</label>\n                        <Input\n                            value={this.state.recipient}\n                            onChange={(event) =>\n                                this.setState({ recipient: event.target.value })\n                            }\n                        />\n                    </Form.Field>\n                    <Message error header=\"Oops!\" content={this.state.errorMessage}/>\n                    <Button primary loading={this.state.loading}>Create!</Button>\n                </Form>\n        )\n    }\n};\n\nexport default withRouter(RequestForm);\n","import React, {Component} from \"react\";\nimport {Table, Button, Message} from \"semantic-ui-react\";\nimport { withRouter } from 'react-router-dom'\nimport web3 from \"../web3\";\nimport Fund from \"../fund\";\n\nclass RequestRow extends  Component {\n    state = {\n        loading: false,\n        errorMessage: ''\n    };\n    onApprove = async () => {\n        console.log(\"======================>\")\n        console.log(this.props);\n        console.log(\"======================>\")\n        this.setState({loading: true, errorMessage: ''});\n\n        const fund = Fund(this.props.address);\n        try {\n            const currentAccount = await web3.givenProvider.selectedAddress;\n            await fund.methods.approveRequest(this.props.id).send({\n                from: currentAccount\n            });\n\n            //window.location.reload(false); //refresh the current detail page -> show the donated amount inside\n        }\n        catch (err) {\n            console.log(\"======================>\")\n            console.log(err.message);\n            console.log(\"======================>\")\n            this.setState({ errorMessage: err.message});\n        }\n        this.setState({loading: false});\n    };\n\n\n    render() {\n        const { Row, Cell } = Table;\n        const {id, request, donatorsCount } = this.props;\n        return (\n            <Row>\n                <Cell>{id}</Cell>\n                <Cell>{request.description}</Cell>\n                <Cell>{web3.utils.fromWei(request.value,'ether')}</Cell>\n                <Cell>{request.recipient}</Cell>\n                <Cell>{request.approvalCount}/{donatorsCount}</Cell>\n                <Cell>\n                    <Button color=\"blue\" basic loading={this.state.loading} onClick={this.onApprove}>Approve</Button>\n                </Cell>\n            </Row>\n        );\n    }\n}\nexport default  withRouter(RequestRow);\n","import React from \"react\";\n//Semantic UI\nimport {Button, Card, Form, Grid, Input, Message, Table} from 'semantic-ui-react'\nimport 'semantic-ui-css/semantic.min.css'\n//React-Route\nimport { withRouter } from 'react-router-dom'\n\nimport web3 from \"../web3\";\nimport Fund from \"../fund\";\nimport ContributeForm from \"./ContributeForm\";\nimport RequestForm from \"./RequestForm\";\nimport RequestRow from \"./RequestRow\";\n\nclass FundDetail extends React.Component {\n    //1. This is part of the constructor will be invoked when page launch index.js\n    state = {\n        fundAddress: '',\n        fundName: '',\n        balance: '',\n        numRequests: '',\n        donatorsCount: '',\n        manager: '',\n        requests: []\n    };\n\n\n\n    //3. This will be invoked after rendering\n    //state.manager changed\n    //4. state change will cause the re-render!\n    async componentDidMount() {\n        const fundAddress = this.props.match.params.fundAddress; //Passed from Welcome.js\n        this.setState({fundAddress});\n\n        const fund = Fund(fundAddress);\n\n        const summary = await fund.methods.getSummary().call();\n\n        console.log(\"=====>\");\n        console.log(summary[0]);\n\n        this.setState({\n            fundAddress: fundAddress,\n            fundName: summary[0],\n            balance: summary[1],\n            numRequests: summary[2],\n            donatorsCount: summary[3],\n            manager: summary[4]\n        })\n\n        console.log(\"=====>\");\n        console.log(\"=====>\");\n        console.log(\"=====>\");\n        //To get Requests\n        const requests = await Promise.all(\n            Array(parseInt(this.state.numRequests))\n                .fill()\n                .map((element, index) => {\n                    return fund.methods.requests(index).call();\n                })\n        );\n\n        this.setState({\n            requests: requests,\n        })\n\n    }\n\n    renderRequestRows() {\n        return this.state.requests.map((request,index)=>{\n            return <RequestRow\n                key={index}\n                id={index}\n                request={request}\n                address={this.state.fundAddress}\n                donatorsCount={this.state.donatorsCount}\n            />;\n        });\n    }\n\n    renderFund() {\n        const items = [{\n            header: this.state.fundName,\n            meta: \"Fund Name\",\n            description:\n                \"The name of this fund\",\n            style: { overflowWrap: \"break-word\" },\n        },\n            {\n            header: this.state.manager,\n            meta: \"Address of Manager\",\n            description:\n                \"The manager created this Fund and can create requests to withdraw money\",\n            style: { overflowWrap: \"break-word\" },\n        },\n            {\n                header: this.state.numRequests,\n                meta: \"Number of Requests\",\n                description:\n                    \"A request tries to withdraw money from the contract. Requests must be approved by donators\",\n            },\n            {\n                header: this.state.donatorsCount,\n                meta: \"Number of Donators\",\n                description:\n                    \"Number of people who have already donated to this fund\",\n            },\n            {\n                header: web3.utils.fromWei(this.state.balance, \"ether\"),\n                meta: \"Fund Balance (ether)\",\n                description:\n                    \"The balance is how much money this fund has left to spend.\",\n            },\n        ];\n\n        return <Card.Group items={items}/>;\n    }\n\n    //2. render to be called\n    render() {\n        return (\n            <div >\n                <Grid padded>\n                    <Grid.Row>\n                        <Grid.Column width={10} >\n                            <h2>Fund Detail</h2>\n                            <div>{this.renderFund()}</div>\n                        </Grid.Column>\n                        <Grid.Column width={6}>\n                            <h2>Donation</h2>\n                            <ContributeForm address={this.state.fundAddress}/>\n                        </Grid.Column>\n                    </Grid.Row>\n                    <Grid.Row>\n                        <Grid.Column width={10}>\n                            <h2>Request List</h2>\n                            <Table>\n                                <Table.Header>\n                                    <Table.Row>\n                                        <Table.HeaderCell>ID</Table.HeaderCell>\n                                        <Table.HeaderCell>Description</Table.HeaderCell>\n                                        <Table.HeaderCell>Amount</Table.HeaderCell>\n                                        <Table.HeaderCell>Recipient</Table.HeaderCell>\n                                        <Table.HeaderCell>App Num</Table.HeaderCell>\n                                        <Table.HeaderCell>Approve</Table.HeaderCell>\n                                    </Table.Row>\n                                </Table.Header>\n                                <Table.Body>\n                                    {this.renderRequestRows()}\n                                </Table.Body>\n                            </Table>\n                        </Grid.Column>\n                        <Grid.Column width={6} >\n                            <h2>Creat Request</h2>\n                            <RequestForm address={this.state.fundAddress}/>\n                        </Grid.Column>\n                    </Grid.Row>\n                </Grid>\n\n            </div>\n        );\n    }\n}\nexport default withRouter(FundDetail);\n\n\n","//React-Route\nimport React from \"react\";\nimport {Redirect, Route} from 'react-router-dom'\nimport Welcome from \"./pages/Welcome\";\nimport FundDetail from \"./pages/FundDetail\";\n\nclass App extends React.Component {\n\n  render() {\n    return (\n        <div >\n            <Route exact path=\"/\">\n                <Welcome/>\n            </Route>\n            <Route exact path=\"/fund\">\n                <Welcome/>\n            </Route>\n            <Route exact path=\"/detail/:fundAddress\">\n                    <FundDetail/>\n            </Route>\n\n\n        </div>\n    );\n  }\n}\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {BrowserRouter} from \"react-router-dom\";\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}